// Generated by CoffeeScript 2.5.1
(function() {
  var CordovaNotification;

  window.o.PlatformCordovaNotification = CordovaNotification = class CordovaNotification extends window.SimpleEvent {
    constructor() {
      super(...arguments);
      if (!this.available()) {
        return;
      }
      FirebasePlugin.setBadgeNumber(0);
      FirebasePlugin.onMessageReceived((message) => {
        if ('notification' === message.messageType) {
          if (message.tap) {
            return this.trigger('tap');
          }
        }
      });
    }

    available() {
      return !!window.FirebasePlugin;
    }

    grant(callback) {
      return FirebasePlugin.grantPermission(callback);
    }

    has(callback) {
      return FirebasePlugin.hasPermission(callback);
    }

    token() {
      var firebase_token_save;
      this._firebase_token = null;
      firebase_token_save = (token) => {
        if (!token || token === this._firebase_token) {
          return;
        }
        this._firebase_token = token;
        return this.trigger("token", {
          token: this._firebase_token
        });
      };
      window.FirebasePlugin.getToken(firebase_token_save);
      return window.FirebasePlugin.onTokenRefresh(firebase_token_save);
    }

    android_notification_channel(channel) {
      return FirebasePlugin.createChannel(Object.assign({
        id: "channel_id",
        name: "Default",
        description: "",
        sound: "default",
        vibration: true,
        light: true,
        lightColor: -1,
        importance: 4,
        badge: true,
        visibility: 1
      }, channel, {
        lightColor: channel.lightColor ? parseInt(channel.lightColor, 16).toString() : -1
      }));
    }

  };

}).call(this);
