// Generated by CoffeeScript 2.5.1
(function() {
  var Cordova, PopupCode;

  PopupCode = window.o.PlatformOffline.prototype.PopupCode;

  window.o.PlatformCordova = Cordova = (function() {
    var PopupCodeCordova;

    class Cordova extends window.o.PlatformOffline {
      _version_error() {
        return this.router.message({
          body: _l('Authorize.version error cordova'),
          actions: [
            {
              event: 'open',
              stay: true,
              body: _l('Authorize.button.open')
            }
          ]
        }).bind('open', () => {
          if (window.cordova && window.cordova.InAppBrowser) {
            window.cordova.InAppBrowser.open(App.config[this.options.platform].market, '_system');
            return;
          }
          return window.open(App.config[this.options.platform].market, '_system');
        });
      }

      success_login() {
        super.success_login(...arguments);
        if (window.SafariViewController) {
          return window.SafariViewController.hide();
        }
      }

    };

    Cordova.prototype.PopupCode = PopupCodeCordova = (function() {
      class PopupCodeCordova extends PopupCode {};

      PopupCodeCordova.prototype.events = Object.assign({}, PopupCode.prototype.events, {
        'click [data-authorize]': function(e) {
          var url;
          url = $(e.target).attr('href');
          if (window.SafariViewController) {
            window.SafariViewController.isAvailable((available) => {
              if (!available) {
                return;
              }
              e.preventDefault();
              return window.SafariViewController.show({url});
            });
            return false;
          } else if (window.cordova && window.cordova.InAppBrowser) {
            e.preventDefault();
            window.cordova.InAppBrowser.open(url, '_system');
            return false;
          }
        }
      });

      return PopupCodeCordova;

    }).call(this);

    Cordova.prototype._name = 'cordova';

    return Cordova;

  }).call(this);

}).call(this);
